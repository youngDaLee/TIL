# ch04. 데이터베이스
## 4.1 데이터베이스의 기본
* DB: 일정한 규칙을 통해 구조화되어 저장되는 데이터 모음. 관리되는 통합 시스템을 DBMS(Database Management System)
  * DB 위에 DBMS가 있고, 그 위에 응용프로그램이 있음

엔티티(entity)
* 속성(이름, 아이디, 주소, 전화번호 등...)을 지닌 **명사** ex) 회원...
* 약한 엔터티와 강한 엔터티
  * A가 혼자 존재 못하고 B의 존재 여부에 따라 종속적
  * 약한 엔터티 : A (ex: 방)
  * 강한 엔터티 : B (ex: 건물)
  * 내가 생각하는 약한/강한 엔터티 : 게시글(강), 태그(약)

릴레이션(relation)
* 정보를 구분해서 저장하는 기본 단위
* 엔터티를 릴레이션 하나에 담아 관리함
* 릴레이션
  * in RDBMS : 테이블 (MySQL : 레코드 - 테이블 - 데이터베이스)
  * in NoSQL : 컬렉션 (MongoDB : 도큐먼트 - 컬렉션 - 데이터베이스)

속성(attribute)
* 릴레이션의 정보

도메인(domain)
* 릴레이션의 각 속성이 가질수 있는 값의 집합

필드와 레코드
* row

MySQL 기준의 필드 타입
* 숫자
  * TINYINT (1 byte)
  * SAMLLINT (2 byte)
  * MEDIUMINT (3 byte)
  * INT (4 byte)
  * BIGINT (8 byte)
* 날짜
  * DATE (3 byte)
  * DATETIME (8 byte)
  * TIMESTAMP (4 byte)
* 문자
  * CHAR : 고정길이 문자열
  * VARCHAR : 가변길이 문자열
  * TEXT : 큰 문자열
  * BLOB : 이미지, 동영상 등 큰 데이터 저장
  * ENUM : 도메인을 지정해서 저장할 수 이쎅 함. 열거 타입
  * SET : ENUM과 비슷하지만 여러 데이터를 선택할 수 있음

관계
* 테이블간의 관계

키
* 기본키(PK) : 유일성, 최소성
  * 자연키 : 중복되지 않는거 자연스럽게 뽑는거... 언젠가 변함 / 인조키 : 인위적으로 부여하는 키
* 외래키(PK) : 다른 테이블 기본키 참조. 관계 식별에 사용
* 후보키 : 기본키가 될 수 있는 후보. 유일성, 최소성
* 대체키 : 기본키를 제외한 후보키
* 슈퍼키 : 유일성

## 4.2 ERD와 정규화 과정
ERD(Entity Relationship Diagram) : DB 구축의 뼈대 역할. 릴레이션간의 관계

ERD의 중요성
* 설계요
* 비정형 데이터를 충분히 표현할 수 없다는 단점...
  * 그래서 Hackolade 같은 툴이 나오고 있음
  * 내 생각에는.. MongoDB와 같은 비정형 데이터여야말로 ERD 잘써야 한다고 생각함... 까딱하면 필드 지맘대로 쓸 수 있기 때문

정규화과정
* 릴레이션간 잘못된 종속 관계 해결하거나, 저장공간 효율적으로 사용하기 위함
* 정규형 원칙 : 좀 더 좋은 구조로 자료의 중복성은 줄이고 독립적인 관계는 별개의 릴레이션으로 표현하고, 각각의 릴레이션은 독립적인표현이 가능해야 한다~

제1정규형
* 릴레이션 모든 도메인이 분리될 수 없는 원자값(atomic value)으로 구성되어야 함
* = 필드에 리스트가 없어야 한다~

제2정규형
* 릴레이션이 제1정규형이며 부분함수의 종속성을 제거한 형태
* 부분함수의 종속성 제거 : 기본키가 아닌 모든 속성이 기본키에 완전함수 종속적
  * 기본키 분리

제3정규형
* 제2정규형이고 기본키가 아닌 모든 속성이 이행적 함수 종속(FD)을 만족시키지 않는 상태
* 이행적 함수 종속
  * A -> B, B -> C 가 존재하면 논리적으로 A->C가 성립 = C가 A에 이행적 함수 종속이다

BCNF(보이스/코드 정규형)
* 제3정규형이고, 결정자가 후보키가 아닌 종속관계를 제거하여 릴레이션 함수 종속 관계에서 모든 결정자가 후보키인 상태
  * 결정자 : 함수 종속 관계에서 종속자를 결정짓는 요소. X->Y에서 X는 결정자/Y는 종속자

정규화를 많이 거친다고 성능이 나아지는게 아님.. 때에따라 비정규화 들어가야 성능 나아지기도 함..


## 4.3 트랜잭션과 무결성

## 4.4 데이터베이스 종류

## 4.5 인덱스

## 4.6 조인의 종류

## 4.7 조인의 원리

## 질문
* DB와 DBMS의 차이가 무엇인가요?

새롭게 알게된거
* 릴레이션 = 관계 로 항상 잘못 쓰는듯... 테이블/컬렉션은 테이블/컬렉션인줄