# ch03. 효율성 완전 정복
- 성능 측면에서 향상시킬 것이 있는가
- 만약 그렇다면 쓸모없이 돌아가는 주기를 멈출 수 있는가
- 기능 X의 레이턴시를 줄이기 위해 얼마나 많은 작업이 필요한가
- 줄일 수 있는 초과 할당이 있는가
- 과도한 네트워크 대역폭 사용을 멈추는 대신 메모리 공간을 희생해야 하는가

## 3.1 낭비제거 이상의 최적화는 제로섬 게임

효율성 최적화 -> 기능 변경 없이 코드를 수정하는 것
- 낭비된 자원 소비 제거

합리적 최적화
- 명백하게 낭비될 때... 낭비를 줄임

의도적 최적화
- 명백하지 않을 때 -> 오히려 이로 인해 비용이 증가할지도...

최적화를 합리적인것/의도적인것으로 구분하는건 중요

## 3.2 최적화 작업의 어려움
- 개발자들은 성능 문제를 일으키는 부분을 잘 예측하지 못한다
- 개발자들은 정확한 자원 사용을 추정하는데 소질이 없다
- 시간이 흐를수록 효율성을 유지하는건 어렵다
- 성능에 대한 신뢰할만한 검증을 수행하는건 어렵다
- 최적화로 인해 다른 소프트웨어 품질에 영향을 끼친다
- 특히 Go에서는 메모리 관리에 대한 엄격한 통제를 지원하지 ㅇ낳는다
- 프로그램이 충분히 효율적인 시점이 언제일지...

## 3.3 목표에 대한 확실한 이해
- XY문제 -> 해결책이 다른곳에 있는 경우...
- 최적화랑 다르게 효율성은 제로섬게임이 아님 -> 
- 최적화 자체에 비용이 많이 든다...

FR
- 기능 요구사항 수집
- 명확한 요구사항을 파악하고 정의하는게 효율성...

RAER
- 자원 효율적 요구사항
- 특정 작업에 대한 효율성 요구사항 -> API, 메서드, 함수, 작업의 최대 레이턴시 등..
- 자주 활용되고 비용이 ㅁ낳은 작업에 초점을 밪출것...
- 입력과 데이터셋의 중요한 카테고리에만 집중할 것. 엣지케이스를 따라가다보면 최악/최상의 데이터셋에 대한 지원 요구사항을 제공할 가능성이 높음
- RARE 정의
  - 명확한 요구사항을 살펴보기
  - 작업의 레이턴시

## 3.4 효율성 문제에 대처하는 태도
- 패닉에 빠지지 말자... 비난하지 말자...

효율성 문제 보고의 6단계 절차
1. 이슈 트래커에서 효율성 문제가 보고됨
2. 중복성을 검사(체계화 하자)
3. 기능 요구사항에 대한 환경을 검증하자 -> 사용자가 의도한대로 동작했는지
4. RAER의 반대 급부 상황을 검증하자 -> 계약상 명시된 것 보다 구진 환경에서 실행해놓고 버그라고 하는건 아닌지
5. 문제를 인정하고, 우선순위에 적어두고, 다음 단계로 나아간다
6. 모든 이슈를 처리했다

## 3.5 최적화 설계 수준들
- 시스템 수준
- 모듈 간 알고리즘과 자료구조 수준
- 실행(코드) 수준
- 운영체제 수준
- 하드웨어 수준

## 3.6 효율성 인식 개발 절차
TFBO
1. 테스트/평가 -> 빠른 프로그램보다 정확한 프로그램을 만드는게 쉽다
   1. 기능 테스트부터 시작하기 TDD
   2. 기능 테스트를 통과하는가
   3. 테스트에 실패하면 누락도니 부분을 수정, 구현, 설계한다 => 짧게&빠르게 피드백 받기
2. 요구사항 평가?
3. 설계/실행/수정
4. 벤치마크/평가
5. 모든 효율성 요구사항 통과
6. 병목 지점 찾기
7. 수준 선택
8. 최적화
9. 배포