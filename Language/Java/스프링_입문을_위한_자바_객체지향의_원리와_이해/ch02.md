# ch02. 자바와 절차적/구조적 프로그래밍
목표
- 변수가 어떻게 메모리에 저장되고 사용되는지
- 메서드가 어떻게 호출되고 메모리에 어떤 변화를 일으키는지
- T메모리 구조에 대해 설명
- JDK, JRE, JVM에 대해 설명

## 정리
JDK > JRE > JVM
* JDK - 자바 개발 도구 : 자바 소스 컴파일러(javac.exe)포함
* JRE - 자바 실행 환경 : 자바 프로그램 실행기(java.exe)포함
* JVM - 자바 가상 기계 : 각 플랫폼에 맞는 JVM이 프로그램을 구동하도록 해줌

### 자바 메모리
- 코드 실행 영역

T메모리 영역
- 데이터 저장 영역(static영역) : 클래스들 존재
- 스택(stack)영역 : 메서드들 존재
- 힙(Heap)영역 : 객체들 존재

### main() 메서드 실행 단계
1. JVM이 java.lang 패키지(모든 자바 프로그램이 필수로 포항해야 하는 패키지)를 static영역에 배치
2. JVM이 모든 클래스와 임포트된 패키지들을 static 영역에 배치
3. main() 스택프레임이 스택영역에 할당됨

=> 위 과정들에서 JRE는 JVM을 부팅함. JVM은 메모리 구조를 만들고 일들을 처리

### 변수와 메모리
- JVM은 메서드 내의 변수를 해당 메서드 스택 프레임 내부에 쌓음

### 블록구문과 메모리 : 블록스택프레임
- if절과 같은 블록영역은 메서드 스택프레임 내부에 해당 블록절 스택프레임을 생성하게 됨
- 해당 블록을 닫는 중괄호를 만나게 되면 해당 블록의 스택프레임은 메서드 스택프레임 내부에서 사라지게 됨

### 지역변수와 메모리
변수는 T메모리 영역(스태틱, 스택, 힙)에 모두 존재.
- 스태틱 영역 : 클래스 멤버 변수 -> JVM 종료될 때 까지 그 위치에 static
- 스택 영역 : 지역 변수 -> 스택프레임이 사라지면 사라짐
  - 외부 스택 프레임에서 내부 스택 프레임 변수에 접근하는것은 불가능하지만 그 역은 가능
- 힙 영역 : 객체 멤버 변수 -> 가비지컬렉터(메모리 회수기)에 의해 사라짐

### 메서드 스택 프레임
- 메서드를 블랙박스화 한다 : 입력값과 반환값에 의해서만 메서드 사이에서 값이 전달되고 **서로의 지역변수를 볼 수 없음**
- 메서드를 호출하면 인자로 전달되는건 변수 자체가 아닌 변수가 저장한 값을 복제해서 전달함 => Call By Value

### 전역변수와 메모리
메서드 사이의 값을 공유하는 방법 : 전역변수 사용
- 전역변수 : 스택프레임에 독립적임. 코드 어느곳에서나 접근 가능

전역변수를 지양하는 이유
- 코드가 커지변서 여러 메서드에서 전역변수 값을 변경하면 어디에서 전역변수를 변경했는지 추적하기 어려워짐

### 멀티스레드/ 멀티프로세스의 이해
- 멀티 스레드 : 스택 영역을 스레드 개수만큼 분할해서 사용
  - 스택 영역은 접근 불가해도, 스태틱 영역과 힙 영역은 공유해서 사용함
  - 메모리를 적게 사용할 수 있는 구조
- 멀티 프로세스 : 다수의 데이터 저장영역. 즉 **다수의 T메모리**를 갖는 구조
  - 하나의 프로세스가 다른 프로세스 T메모리 영역 침범 불가
  - 안전
  - 메모리 사용량 큼
